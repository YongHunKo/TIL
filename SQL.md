# SQL 실력 유지 + 향상
## 조별과제 작품 ex버전 나만사용하는
### DDL 시작부분
```SQL
DROP DATABASE IF EXISTS 365mart;
CREATE DATABASE 365mart;

USE 365mart;

DROP TABLE IF EXISTS cate;
CREATE TABLE cate(
	cateid INT,
    topid INT,
    name VARCHAR(20) NOT NULL
);
ALTER TABLE cate ADD CONSTRAINT PRIMARY KEY (cateid);
ALTER TABLE cate ADD CONSTRAINT FOREIGN KEY (topid)REFERENCES cate (cateid);

SELECT * FROM cate;
-- 여기까지가 카테고리 관리부분

DROP TABLE IF EXISTS seller;
CREATE TABLE seller (
	sellid INT,
    seller VARCHAR(10) NOT NULL,
    saddr VARCHAR(20) NOT NULL
);
ALTER TABLE seller ADD CONSTRAINT PRIMARY KEY (sellid);

SELECT * FROM seller;
-- 여기까지가 판매자 관리부분


DROP TABLE IF EXISTS item;
CREATE TABLE item (
	itemid INT,
    cateid INT,
    sellid INT,
    name VARCHAR(10) NOT NULL,
    price INT NOT NULL,
    img VARCHAR(20),
    rdate DATETIME
);
ALTER TABLE item ADD CONSTRAINT PRIMARY KEY (itemid);
ALTER TABLE item MODIFY itemid INT AUTO_INCREMENT;
ALTER TABLE item AUTO_INCREMENT = 101;
ALTER TABLE item ADD CONSTRAINT FOREIGN KEY (cateid)REFERENCES cate (cateid);
ALTER TABLE item ADD CONSTRAINT FOREIGN KEY (sellid)REFERENCES seller (sellid);
ALTER TABLE item ADD CONSTRAINT CHECK (price > 0);

DESC item;
SELECT * FROM item;
-- 여기까지가 상품 관리 부분

-- DROP TABLE IF EXISTS customer;
CREATE TABLE customer (
	custid VARCHAR(20),
    cname VARCHAR(20) NOT NULL,
    -- gender BOOLEAN NOT NULL,
    gender VARCHAR(10),
    age int NOT NULL,
    caddr VARCHAR(20) NOT NULL
);
ALTER TABLE customer ADD CONSTRAINT PRIMARY KEY (custid);

DESC customer;
-- 여기까지 고객 관리

-- DROP TABLE IF EXISTS cart;
CREATE TABLE cart (
	cartid INT,
    itemid INT NOT NULL,
    custid VARCHAR(20),
    cnt INT NOT NULL,
    rdate DATETIME
);
ALTER TABLE cart ADD CONSTRAINT PRIMARY KEY (cartid);
ALTER TABLE cart ADD CONSTRAINT FOREIGN KEY (itemid)REFERENCES item (itemid);
ALTER TABLE cart ADD CONSTRAINT FOREIGN KEY (custid)REFERENCES customer (custid);
ALTER TABLE cart ADD CONSTRAINT CHECK (cnt >= 0);

SELECT * FROM cart;
-- 여기까지가 장바구니 관리



-- DROP TABLE IF EXISTS request;
CREATE TABLE request(
	rqid INT,
	custid VARCHAR(20) NOT NULL,
	pay VARCHAR(20) NOT NULL,
    orderprice INT,
    orderdate DATETIME
);
ALTER TABLE request ADD CONSTRAINT PRIMARY KEY (rqid);
ALTER TABLE request MODIFY rqid INT AUTO_INCREMENT;
ALTER TABLE request AUTO_INCREMENT=1;
ALTER TABLE request ADD CONSTRAINT FOREIGN KEY (custid)REFERENCES customer (custid);

SELECT * FROM request;
-- 여기까지 주문 관리

DROP TABLE IF EXISTS requestDetail;
CREATE TABLE requestDetail(
	rdno VARCHAR(20),
    rqid INT,
    itemid INT,
    total INT,
    coupon FLOAT,
    rdcnt INT
);
ALTER TABLE requestDetail ADD CONSTRAINT PRIMARY KEY (rdno);
ALTER TABLE requestDetail ADD CONSTRAINT CHECK (coupon >= 0);
ALTER TABLE requestDetail ADD CONSTRAINT FOREIGN KEY (rqid)REFERENCES request (rqid);
ALTER TABLE requestDetail ADD CONSTRAINT FOREIGN KEY (itemid)REFERENCES item (itemid);
-- 여기까지가 주문상세

-- DROP TABLE IF EXISTS trans;
CREATE TABLE trans(
	transid INT,
    orderid INT,
    tran VARCHAR(10) NOT NULL,
    ttime DATETIME
);
ALTER TABLE trans ADD CONSTRAINT PRIMARY KEY (transid);
ALTER TABLE trans MODIFY transid INT AUTO_INCREMENT;
ALTER TABLE trans AUTO_INCREMENT = 1;
ALTER TABLE trans ADD CONSTRAINT FOREIGN KEY (orderid)REFERENCES request (rqid);
-- 여기까지 배달

-- DROP TABLE IF EXISTS stor;
CREATE TABLE stor(
	storid INT,
    itemid INT,
    stor INT ,
    loc VARCHAR(10)
);
ALTER TABLE stor ADD CONSTRAINT PRIMARY KEY (storid);
ALTER TABLE stor MODIFY storid INT AUTO_INCREMENT;
ALTER TABLE stor AUTO_INCREMENT = 0;

ALTER TABLE stor ADD CONSTRAINT FOREIGN KEY (itemid)REFERENCES item (itemid);
ALTER TABLE stor ADD CONSTRAINT CHECK (stor >= 0);
-- 여기까지 재고
-- 

-- DROP TABLE IF EXISTS refund;
CREATE TABLE refund(
	rfid INT,
    rdno VARCHAR(20) NOT NULL,
    reason VARCHAR(20) NOT NULL
);
ALTER TABLE refund ADD CONSTRAINT PRIMARY KEY (rfid);
ALTER TABLE refund ADD CONSTRAINT FOREIGN KEY (rdno)REFERENCES requestDetail (rdno);
```
- DDL문

### SQL문 시작
```java
-- 데이터 테이블
SELECT * FROM cart;
SELECT * FROM cate;
SELECT * FROM customer;
SELECT * FROM item;
SELECT * FROM refund;
SELECT * FROM request;
SELECT * FROM requestdetail;
SELECT * FROM seller;
SELECT * FROM stor;
SELECT * FROM trans;

INSERT INTO cate VALUES (10, NULL, '과일/채소');
INSERT INTO cate VALUES (20, NULL, '생선/고기');
INSERT INTO cate VALUES (30, NULL, '우유/유제품');
INSERT INTO cate VALUES (40, NULL, '냉동/냉장');
INSERT INTO cate VALUES (50, NULL, '쌀잡곡');
INSERT INTO cate VALUES (60, NULL, '유아용품');
INSERT INTO cate VALUES (70, NULL, '주방용품');
INSERT INTO cate VALUES (80, NULL, '디지털용품');

INSERT INTO cate VALUES (11, 10, '과일');
INSERT INTO cate VALUES (12, 10, '채소');
INSERT INTO cate VALUES (13, 10, '구황작물');

INSERT INTO cate VALUES (21, 20, '고기');
INSERT INTO cate VALUES (22, 20, '생선');

INSERT INTO cate VALUES (31, 30, '우유');
INSERT INTO cate VALUES (32, 30, '치즈');
INSERT INTO cate VALUES (33, 30, '요거트');

INSERT INTO cate VALUES (41, 40, '볶음밥/컵밥');
INSERT INTO cate VALUES (42, 40, '튀김류');
INSERT INTO cate VALUES (43, 40, '밀키트');

INSERT INTO cate VALUES (51, 50, '쌀');
INSERT INTO cate VALUES (52, 50, '견과류');

INSERT INTO cate VALUES (61, 60, '위생용품');
INSERT INTO cate VALUES (62, 60, '완구');
INSERT INTO cate VALUES (63, 60, '유아패션');

INSERT INTO cate VALUES (71, 70, '조리도구');
INSERT INTO cate VALUES (72, 70, '식기/세제');

INSERT INTO cate VALUES (81, 80, '생활가전');
INSERT INTO cate VALUES (82, 80, '주방가전');
SELECT * FROM cate;
-- 완

INSERT INTO seller VALUES (616, '고용훈', '서울 은평구');
INSERT INTO seller VALUES (725, '노주희', '대전 중구');
INSERT INTO seller VALUES (336, '신용권', '대구 북구');
INSERT INTO seller VALUES (188, '서재원', '부산 남구');
SELECT * FROM seller;
-- 완

INSERT INTO item VALUES (NULL, 11, NULL, '사과', 39800, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, NULL, '배', 29900, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, NULL, '키위', 8900, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, NULL, '블루베리', 27000, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, NULL, '포도', 43900, NULL, NOW());

INSERT INTO item VALUES (NULL, 12, NULL, '두부', 1280, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, NULL, '양파', 15900, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, NULL, '깐마늘', 4900, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, NULL, '양배추', 5900, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, NULL, '당근', 13400, NULL, NOW());

INSERT INTO item VALUES (NULL, 13, NULL, '밤고구마', 16500, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, NULL, '호박고구마', 7900, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, NULL, '감자', 15900, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, NULL, '찰옥수수', 26500, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, NULL, '초당옥수수', 17900, NULL, NOW());
-- 여기까지 상온 A1 0~14


INSERT INTO item VALUES (NULL, 21, NULL, '삼겹살 구이용', 2200, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, NULL, '앞다리살 불고기용', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, NULL, '한우 등심', 9700, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, NULL, '한우 채끝살', 14500, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, NULL, '닭 백숙용', 8000, NULL, NOW());

INSERT INTO item VALUES (NULL, 22, NULL, '고등어', 13900, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, NULL, '굴비', 29900, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, NULL, '갈치', 7000, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, NULL, '연어', 25900, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, NULL, '오징어', 5000, NULL, NOW());

INSERT INTO item VALUES (NULL, 31, NULL, '흰우유', 5000, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, NULL, '바나나우유', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, NULL, '커피우유', 1800, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, NULL, '초코우유', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, NULL, '두유', 9500, NULL, NOW());

INSERT INTO item VALUES (NULL, 32, NULL, '체다 치즈', 7900, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, NULL, '슈레드 치즈', 12000, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, NULL, '크림치즈', 6000, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, NULL, '모짜렐라 치즈', 6500, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, NULL, '리코타 치즈', 6000, NULL, NOW());

INSERT INTO item VALUES (NULL, 33, NULL, '플레인 요거트', 6500, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, NULL, '요구르트', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, NULL, '비요뜨', 2500, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, NULL, '생크림', 5000, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, NULL, '버터', 8000, NULL, NOW());
-- 여기까지 쿨 c1 15~39


INSERT INTO item VALUES (NULL, 41, NULL, '새우볶음밥', 7900, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, NULL, '깍두기 볶음밥', 9800, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, NULL, '스팸마요 컵밥', 4400, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, NULL, '제육덮밥 컵밥', 4500, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, NULL, '비빔밥 컵밥', 5000, NULL, NOW());

INSERT INTO item VALUES (NULL, 42, NULL, '새우튀김', 12000, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, NULL, '감자튀김', 13500, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, NULL, '돈까스', 9500, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, NULL, '치킨너겟', 7500, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, NULL, '만두', 6500, NULL, NOW());
-- 여기까지 냉동 c2 40~49
INSERT INTO item VALUES (NULL, 51, NULL, '백미', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, NULL, '현미', 28000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, NULL, '잡곡', 30000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, NULL, '찹쌀', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, NULL, '귀리', 9000, NULL, NOW());

INSERT INTO item VALUES (NULL, 52, NULL, '호두', 7000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, NULL, '아몬드', 8000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, NULL, '마카다미아', 15000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, NULL, '땅콩', 12000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, NULL, '은행', 9000, NULL, NOW());
-- 여기는 다시 상온 50~59
INSERT INTO item VALUES (NULL, 61, NULL, '화장지', 25000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, NULL, '물티슈', 5000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, NULL, '마스크', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, NULL, '칫솔', 15000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, NULL, '치약', 8000, NULL, NOW());

INSERT INTO item VALUES (NULL, 62, NULL, '레고', 55000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, NULL, '인형', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, NULL, '피규어', 70000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, NULL, '유아완구', 20000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, NULL, '대형완구', 100000, NULL, NOW());
-- 여기까지 생활용품 60~69
INSERT INTO item VALUES (NULL, 63, NULL, '티셔츠', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, NULL, '바지', 25000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, NULL, '겉옷', 50000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, NULL, '내복', 20000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, NULL, '신발', 35000, NULL, NOW());
-- 여기까지 의류 70~74
INSERT INTO item VALUES (NULL, 71, NULL, '프라이팬', 50000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, NULL, '도마', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, NULL, '칼', 20000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, NULL, '냄비', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, NULL, '주전자', 40000, NULL, NOW());

INSERT INTO item VALUES (NULL, 72, NULL, '숟가락/젓가락', 15000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, NULL, '주걱', 8000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, NULL, '그릇', 50000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, NULL, '컵', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, NULL, '세제', 5000, NULL, NOW());
-- 여기까지 소형 75~84
INSERT INTO item VALUES (NULL, 81, NULL, '세탁기', 750000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, NULL, '공기청정기', 400000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, NULL, '에어컨', 800000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, NULL, 'TV', 1500000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, NULL, '제습기', 150000, NULL, NOW());

INSERT INTO item VALUES (NULL, 82, NULL, '식기세척기', 350000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, NULL, '건조기', 400000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, NULL, '정수기', 250000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, NULL, '전자레인지', 150000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, NULL, '가스레인지', 100000, NULL, NOW());
-- 대형 85~94
-- 완

INSERT INTO customer VALUES('abc','강동우','남',38,'서울 강남구');
INSERT INTO customer VALUES('def','강민정','여',27,'서울 은평구');
INSERT INTO customer VALUES('ghi','김재준','남',32,'서울 강동구');
INSERT INTO customer VALUES('jkl','박유리','여',36,'서울 구로구');
INSERT INTO customer VALUES('mno','정석민','남',38,'서울 마포구');
INSERT INTO customer VALUES('pqr','장성혜','여',24,'경기도 용인시');
INSERT INTO customer VALUES('stu','고대준','남',45,'경기도 이천시');
INSERT INTO customer VALUES('vwx','현은재','여',57,'강원도 강릉시');
INSERT INTO customer VALUES('yza','신상범','남',51,'경북 대구시');
INSERT INTO customer VALUES('bcd','이은숙','여',70,'전남 나주시');
INSERT INTO customer VALUES('efg','정희천','남',66,'전북 전주시');
INSERT INTO customer VALUES('hij','김민지','여',32,'경남 부산시');
SELECT * FROM customer;
-- 완

INSERT INTO request VALUES(NULL,'abc','신용카드',NULL,NULL);
INSERT INTO request VALUES(NULL,'def','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'ghi','계좌이체',NULL,NULL);
INSERT INTO request VALUES(NULL,'jkl','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'mno','신용카드 결제',NULL,NULL);
INSERT INTO request VALUES(NULL,'pqr','계좌이체',NULL,NULL);
INSERT INTO request VALUES(NULL,'stu','계좌이체',NULL,NULL);
INSERT INTO request VALUES(NULL,'vwx','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'yza','신용카드 결제',NULL,NULL);
INSERT INTO request VALUES(NULL,'bcd','신용카드 결제',NULL,NULL);
INSERT INTO request VALUES(NULL,'efg','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'hij','계좌이체',NULL,NULL);
SELECT * FROM request;
-- 완

INSERT INTO cart VALUES(1234,101,'abc',10,'2022-09-01 21:09:21');
INSERT INTO cart VALUES(1235,103,'def',10,'2022-09-02 12:00:00');
INSERT INTO cart VALUES(1236,151,'jkl',31,'2022-09-03 19:24:01');
INSERT INTO cart VALUES(1237,161,'mno',300,'2022-09-05 17:22:21');

INSERT INTO cart VALUES(1238,184,'efg',35,'2022-09-27 15:35:28');
INSERT INTO cart VALUES(1239,194,'ghi',3000,'2022-08-01 22:09:21');
INSERT INTO cart VALUES(1240,153,'pqr',10,'2022-08-24 13:00:00');
INSERT INTO cart VALUES(1241,152,'vwx',31,'2022-08-25 19:24:04');

INSERT INTO cart VALUES(1242,151,'hij',300,'2022-09-05 16:22:21');
INSERT INTO cart VALUES(1243,121,'stu',35,'2022-09-08 20:35:28');
INSERT INTO cart VALUES(1244,134,'yza',300,'2022-09-05 17:22:21');
INSERT INTO cart VALUES(1245,100,'bcd',35,'2022-09-08 14:35:28');
SELECT * FROM cart;


INSERT INTO refund VALUES ( 1, 'a', '단순변심');
INSERT INTO refund VALUES ( 2, 'b', '상품파손');
INSERT INTO refund VALUES ( 3, 'c', '서비스불만족');
INSERT INTO refund VALUES ( 4, 'd', '주문실수');
SELECT * FROM refund;
-- 완

INSERT INTO requestdetail VALUES ('a',1,101,NULL,0,5);
INSERT INTO requestdetail VALUES ('b',2,150,NULL,0,10);
INSERT INTO requestdetail VALUES ('c',3,140,NULL,0,9);
INSERT INTO requestdetail VALUES ('d',4,120,NULL,0,4);
INSERT INTO requestdetail VALUES ('e',5,115,NULL,0,2);
SELECT * FROM requestdetail;

INSERT INTO stor VALUES(NULL, 101, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 102, 1500, 'A1');
INSERT INTO stor VALUES(NULL, 103, 1600, 'A1');
INSERT INTO stor VALUES(NULL, 104, 1200, 'A1');
INSERT INTO stor VALUES(NULL, 105, 2000, 'A1');
INSERT INTO stor VALUES(NULL, 106, 1900, 'A1');
INSERT INTO stor VALUES(NULL, 107, 2100, 'A1');
INSERT INTO stor VALUES(NULL, 108, 1300, 'A1');
INSERT INTO stor VALUES(NULL, 109, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 110, 2000, 'A1');
INSERT INTO stor VALUES(NULL, 111, 1700, 'A1');
INSERT INTO stor VALUES(NULL, 112, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 113, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 114, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 115, 1000, 'A1');
-- 상온보관 A1
INSERT INTO stor VALUES(NULL, 116, 300, 'C1');
INSERT INTO stor VALUES(NULL, 117, 200, 'C1');
INSERT INTO stor VALUES(NULL, 118, 270, 'C1');
INSERT INTO stor VALUES(NULL, 119, 250, 'C1');
INSERT INTO stor VALUES(NULL, 120, 200, 'C1');
INSERT INTO stor VALUES(NULL, 121, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 122, 900, 'C1');
INSERT INTO stor VALUES(NULL, 123, 800, 'C1');
INSERT INTO stor VALUES(NULL, 124, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 125, 1100, 'C1');
INSERT INTO stor VALUES(NULL, 126, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 127, 700, 'C1');
INSERT INTO stor VALUES(NULL, 128, 800, 'C1');
INSERT INTO stor VALUES(NULL, 129, 600, 'C1');
INSERT INTO stor VALUES(NULL, 130, 500, 'C1');
INSERT INTO stor VALUES(NULL, 131, 900, 'C1');
INSERT INTO stor VALUES(NULL, 132, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 133, 500, 'C1');
INSERT INTO stor VALUES(NULL, 134, 500, 'C1');
INSERT INTO stor VALUES(NULL, 135, 700, 'C1');
INSERT INTO stor VALUES(NULL, 136, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 137, 700, 'C1');
INSERT INTO stor VALUES(NULL, 138, 500, 'C1');
INSERT INTO stor VALUES(NULL, 139, 500, 'C1');
INSERT INTO stor VALUES(NULL, 140, 1000, 'C1');
-- 40번까지 + 15~40까지 냉장보관
INSERT INTO stor VALUES(NULL, 141, 700, 'C2');
INSERT INTO stor VALUES(NULL, 142, 800, 'C2');
INSERT INTO stor VALUES(NULL, 143, 700, 'C2');
INSERT INTO stor VALUES(NULL, 144, 900, 'C2');
INSERT INTO stor VALUES(NULL, 145, 900, 'C2');
INSERT INTO stor VALUES(NULL, 146, 800, 'C2');
INSERT INTO stor VALUES(NULL, 147, 900, 'C2');
INSERT INTO stor VALUES(NULL, 148, 700, 'C2');
INSERT INTO stor VALUES(NULL, 149, 800, 'C2');
INSERT INTO stor VALUES(NULL, 150, 700, 'C2');
-- 50번까지 40~50 냉동보관
INSERT INTO stor VALUES(NULL, 151, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 152, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 153, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 154, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 155, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 156, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 157, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 158, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 159, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 160, 1000, 'A1');
-- 50~60 상온보관
INSERT INTO stor VALUES(NULL, 161, 1500, 'L1');
INSERT INTO stor VALUES(NULL, 162, 1300, 'L1');
INSERT INTO stor VALUES(NULL, 163, 1200, 'L1');
INSERT INTO stor VALUES(NULL, 164, 1300, 'L1');
INSERT INTO stor VALUES(NULL, 165, 1100, 'L1');
-- 65번까지
INSERT INTO stor VALUES(NULL, 166, 1300, 'L1');
INSERT INTO stor VALUES(NULL, 167, 1400, 'L1');
INSERT INTO stor VALUES(NULL, 168, 1200, 'L1');
INSERT INTO stor VALUES(NULL, 169, 1500, 'L1');
INSERT INTO stor VALUES(NULL, 170, 1000, 'L1');
-- 65~70 소형물품보관장소
INSERT INTO stor VALUES(NULL, 171, 1000, 'W1');
INSERT INTO stor VALUES(NULL, 172, 800, 'W1');
INSERT INTO stor VALUES(NULL, 173, 800, 'W1');
INSERT INTO stor VALUES(NULL, 174, 900, 'W1');
INSERT INTO stor VALUES(NULL, 175, 800, 'W1');
-- 70~75 의류
INSERT INTO stor VALUES(NULL, 176, 200, 'L1');
INSERT INTO stor VALUES(NULL, 177, 200, 'L1');
INSERT INTO stor VALUES(NULL, 178, 300, 'L1');
INSERT INTO stor VALUES(NULL, 179, 150, 'L1');
INSERT INTO stor VALUES(NULL, 180, 170, 'L1');
INSERT INTO stor VALUES(NULL, 181, 130, 'L1');
INSERT INTO stor VALUES(NULL, 182, 110, 'L1');
INSERT INTO stor VALUES(NULL, 183, 150, 'L1');
INSERT INTO stor VALUES(NULL, 184, 160, 'L1');
INSERT INTO stor VALUES(NULL, 185, 140, 'L1');
-- 85번까지 소형가전보관소
INSERT INTO stor VALUES(NULL, 186, 20, 'L2');
INSERT INTO stor VALUES(NULL, 187, 20, 'L2');
INSERT INTO stor VALUES(NULL, 188, 30, 'L2');
INSERT INTO stor VALUES(NULL, 189, 15, 'L2');
INSERT INTO stor VALUES(NULL, 190, 17, 'L2');
INSERT INTO stor VALUES(NULL, 191, 13, 'L2');
INSERT INTO stor VALUES(NULL, 192, 11, 'L2');
INSERT INTO stor VALUES(NULL, 193, 15, 'L2');
INSERT INTO stor VALUES(NULL, 194, 16, 'L2');
INSERT INTO stor VALUES(NULL, 195, 14, 'L2');
-- 95번까지 대형물품 창고
SELECT * FROM stor;
DESC stor;

INSERT INTO trans VALUES (NULL, 1, '가능', NOW());
INSERT INTO trans VALUES (NULL, 2, '불가능', NULL);
INSERT INTO trans VALUES (NULL, 3, '가능', NOW());
INSERT INTO trans VALUES (NULL, 4, '가능', NOW());
INSERT INTO trans VALUES (NULL, 5, '가능', NOW());
INSERT INTO trans VALUES (NULL, 6, '가능', NOW());
INSERT INTO trans VALUES (NULL, 7, '불가능', NULL);
INSERT INTO trans VALUES (NULL, 8, '가능', NOW());
INSERT INTO trans VALUES (NULL, 9, '가능', NOW());
INSERT INTO trans VALUES (NULL, 10, '가능', NOW());
INSERT INTO trans VALUES (NULL, 11, '가능', NOW());
INSERT INTO trans VALUES (NULL, 12, '가능', NOW());
SELECT * FROM trans;
```
- INSERT 문

### 합본
```SQL
DROP DATABASE IF EXISTS 365mart;
CREATE DATABASE 365mart;

USE 365mart;

DROP TABLE IF EXISTS cate;
CREATE TABLE cate(
	cateid INT,
    topid INT,
    name VARCHAR(20) NOT NULL
);
ALTER TABLE cate ADD CONSTRAINT PRIMARY KEY (cateid);
ALTER TABLE cate ADD CONSTRAINT FOREIGN KEY (topid)REFERENCES cate (cateid);
INSERT INTO cate VALUES (10, NULL, '과일/채소');
INSERT INTO cate VALUES (20, NULL, '생선/고기');
INSERT INTO cate VALUES (30, NULL, '우유/유제품');
INSERT INTO cate VALUES (40, NULL, '냉동/냉장');
INSERT INTO cate VALUES (50, NULL, '쌀잡곡');
INSERT INTO cate VALUES (60, NULL, '유아용품');
INSERT INTO cate VALUES (70, NULL, '주방용품');
INSERT INTO cate VALUES (80, NULL, '디지털용품');

INSERT INTO cate VALUES (11, 10, '과일');
INSERT INTO cate VALUES (12, 10, '채소');
INSERT INTO cate VALUES (13, 10, '구황작물');

INSERT INTO cate VALUES (21, 20, '고기');
INSERT INTO cate VALUES (22, 20, '생선');

INSERT INTO cate VALUES (31, 30, '우유');
INSERT INTO cate VALUES (32, 30, '치즈');
INSERT INTO cate VALUES (33, 30, '요거트');

INSERT INTO cate VALUES (41, 40, '볶음밥/컵밥');
INSERT INTO cate VALUES (42, 40, '튀김류');
INSERT INTO cate VALUES (43, 40, '밀키트');

INSERT INTO cate VALUES (51, 50, '쌀');
INSERT INTO cate VALUES (52, 50, '견과류');

INSERT INTO cate VALUES (61, 60, '위생용품');
INSERT INTO cate VALUES (62, 60, '완구');
INSERT INTO cate VALUES (63, 60, '유아패션');

INSERT INTO cate VALUES (71, 70, '조리도구');
INSERT INTO cate VALUES (72, 70, '식기/세제');

INSERT INTO cate VALUES (81, 80, '생활가전');
INSERT INTO cate VALUES (82, 80, '주방가전');

DROP TABLE IF EXISTS seller;
CREATE TABLE seller (
	sellid INT,
    seller VARCHAR(10) NOT NULL,
    saddr VARCHAR(20) NOT NULL
);
ALTER TABLE seller ADD CONSTRAINT PRIMARY KEY (sellid);
INSERT INTO seller VALUES (616, '고용훈', '서울 은평구');
INSERT INTO seller VALUES (725, '노주희', '대전 중구');
INSERT INTO seller VALUES (336, '신용권', '대구 북구');
INSERT INTO seller VALUES (188, '서재원', '부산 남구');
SELECT * FROM seller;

DROP TABLE IF EXISTS item;
CREATE TABLE item (
	itemid INT,
    cateid INT,
    sellid INT,
    name VARCHAR(10) NOT NULL,
    price INT NOT NULL,
    img VARCHAR(20),
    rdate DATETIME
);
ALTER TABLE item ADD CONSTRAINT PRIMARY KEY (itemid);
ALTER TABLE item MODIFY itemid INT AUTO_INCREMENT;
ALTER TABLE item AUTO_INCREMENT = 101;
ALTER TABLE item ADD CONSTRAINT FOREIGN KEY (cateid)REFERENCES cate (cateid);
ALTER TABLE item ADD CONSTRAINT FOREIGN KEY (sellid)REFERENCES seller (sellid);
ALTER TABLE item ADD CONSTRAINT CHECK (price > 0);

INSERT INTO item VALUES (NULL, 11, 616, '사과', 39800, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, 616, '배', 29900, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, 616, '키위', 8900, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, 616, '블루베리', 27000, NULL, NOW());
INSERT INTO item VALUES (NULL, 11, 616, '포도', 43900, NULL, NOW());

INSERT INTO item VALUES (NULL, 12, 616, '두부', 1280, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, 616, '양파', 15900, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, 616, '깐마늘', 4900, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, 616, '양배추', 5900, NULL, NOW());
INSERT INTO item VALUES (NULL, 12, 616, '당근', 13400, NULL, NOW());

INSERT INTO item VALUES (NULL, 13, 616, '밤고구마', 16500, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, 616, '호박고구마', 7900, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, 616, '감자', 15900, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, 616, '찰옥수수', 26500, NULL, NOW());
INSERT INTO item VALUES (NULL, 13, 616, '초당옥수수', 17900, NULL, NOW());
-- 여기까지 상온 A1 0~14


INSERT INTO item VALUES (NULL, 21, 616, '삼겹살 구이용', 2200, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, 616, '앞다리살 불고기용', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, 616, '한우 등심', 9700, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, 616, '한우 채끝살', 14500, NULL, NOW());
INSERT INTO item VALUES (NULL, 21, 616, '닭 백숙용', 8000, NULL, NOW());

INSERT INTO item VALUES (NULL, 22, 616, '고등어', 13900, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, 616, '굴비', 29900, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, 616, '갈치', 7000, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, 616, '연어', 25900, NULL, NOW());
INSERT INTO item VALUES (NULL, 22, 616, '오징어', 5000, NULL, NOW());

INSERT INTO item VALUES (NULL, 31, 725, '흰우유', 5000, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, 725, '바나나우유', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, 725, '커피우유', 1800, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, 725, '초코우유', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 31, 725, '두유', 9500, NULL, NOW());

INSERT INTO item VALUES (NULL, 32, 725, '체다 치즈', 7900, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, 725, '슈레드 치즈', 12000, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, 725, '크림치즈', 6000, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, 725, '모짜렐라 치즈', 6500, NULL, NOW());
INSERT INTO item VALUES (NULL, 32, 725, '리코타 치즈', 6000, NULL, NOW());

INSERT INTO item VALUES (NULL, 33, 725, '플레인 요거트', 6500, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, 725, '요구르트', 1500, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, 725, '비요뜨', 2500, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, 725, '생크림', 5000, NULL, NOW());
INSERT INTO item VALUES (NULL, 33, 725, '버터', 8000, NULL, NOW());
-- 여기까지 쿨 c1 15~39


INSERT INTO item VALUES (NULL, 41, 336, '새우볶음밥', 7900, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, 336, '깍두기 볶음밥', 9800, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, 336, '스팸마요 컵밥', 4400, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, 336, '제육덮밥 컵밥', 4500, NULL, NOW());
INSERT INTO item VALUES (NULL, 41, 336, '비빔밥 컵밥', 5000, NULL, NOW());

INSERT INTO item VALUES (NULL, 42, 336, '새우튀김', 12000, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, 336, '감자튀김', 13500, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, 336, '돈까스', 9500, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, 336, '치킨너겟', 7500, NULL, NOW());
INSERT INTO item VALUES (NULL, 42, 336, '만두', 6500, NULL, NOW());
-- 여기까지 냉동 c2 40~49
INSERT INTO item VALUES (NULL, 51, 725, '백미', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, 725, '현미', 28000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, 725, '잡곡', 30000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, 725, '찹쌀', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 51, 725, '귀리', 9000, NULL, NOW());

INSERT INTO item VALUES (NULL, 52, 725, '호두', 7000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, 725, '아몬드', 8000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, 725, '마카다미아', 15000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, 725, '땅콩', 12000, NULL, NOW());
INSERT INTO item VALUES (NULL, 52, 725, '은행', 9000, NULL, NOW());
-- 여기는 다시 상온 50~59
INSERT INTO item VALUES (NULL, 61, 336, '화장지', 25000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, 336, '물티슈', 5000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, 336, '마스크', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, 336, '칫솔', 15000, NULL, NOW());
INSERT INTO item VALUES (NULL, 61, 336, '치약', 8000, NULL, NOW());

INSERT INTO item VALUES (NULL, 62, 336, '레고', 55000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, 336, '인형', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, 336, '피규어', 70000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, 336, '유아완구', 20000, NULL, NOW());
INSERT INTO item VALUES (NULL, 62, 336, '대형완구', 100000, NULL, NOW());
-- 여기까지 생활용품 60~69
INSERT INTO item VALUES (NULL, 63, 188, '티셔츠', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, 188, '바지', 25000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, 188, '겉옷', 50000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, 188, '내복', 20000, NULL, NOW());
INSERT INTO item VALUES (NULL, 63, 188, '신발', 35000, NULL, NOW());
-- 여기까지 의류 70~74
INSERT INTO item VALUES (NULL, 71, 188, '프라이팬', 50000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, 188, '도마', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, 188, '칼', 20000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, 188, '냄비', 35000, NULL, NOW());
INSERT INTO item VALUES (NULL, 71, 188, '주전자', 40000, NULL, NOW());

INSERT INTO item VALUES (NULL, 72, 188, '숟가락/젓가락', 15000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, 188, '주걱', 8000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, 188, '그릇', 50000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, 188, '컵', 10000, NULL, NOW());
INSERT INTO item VALUES (NULL, 72, 188, '세제', 5000, NULL, NOW());
-- 여기까지 소형 75~84
INSERT INTO item VALUES (NULL, 81, 188, '세탁기', 750000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, 188, '공기청정기', 400000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, 188, '에어컨', 800000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, 188, 'TV', 1500000, NULL, NOW());
INSERT INTO item VALUES (NULL, 81, 188, '제습기', 150000, NULL, NOW());

INSERT INTO item VALUES (NULL, 82, 188, '식기세척기', 350000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, 188, '건조기', 400000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, 188, '정수기', 250000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, 188, '전자레인지', 150000, NULL, NOW());
INSERT INTO item VALUES (NULL, 82, 188, '가스레인지', 100000, NULL, NOW());

CREATE TABLE customer (
	custid VARCHAR(20),
    cname VARCHAR(20) NOT NULL,
    -- gender BOOLEAN NOT NULL,
    gender VARCHAR(10),
    age int NOT NULL,
    caddr VARCHAR(20) NOT NULL
);
ALTER TABLE customer ADD CONSTRAINT PRIMARY KEY (custid);
INSERT INTO customer VALUES('abc','강동우','남',38,'서울 강남구');
INSERT INTO customer VALUES('def','강민정','여',27,'서울 은평구');
INSERT INTO customer VALUES('ghi','김재준','남',32,'서울 강동구');
INSERT INTO customer VALUES('jkl','박유리','여',36,'서울 구로구');
INSERT INTO customer VALUES('mno','정석민','남',38,'서울 마포구');
INSERT INTO customer VALUES('pqr','장성혜','여',24,'경기도 용인시');
INSERT INTO customer VALUES('stu','고대준','남',45,'경기도 이천시');
INSERT INTO customer VALUES('vwx','현은재','여',57,'강원도 강릉시');
INSERT INTO customer VALUES('yza','신상범','남',51,'경북 대구시');
INSERT INTO customer VALUES('bcd','이은숙','여',70,'전남 나주시');
INSERT INTO customer VALUES('efg','정희천','남',66,'전북 전주시');
INSERT INTO customer VALUES('hij','김민지','여',32,'경남 부산시');

CREATE TABLE cart (
	cartid INT,
    itemid INT NOT NULL,
    custid VARCHAR(20),
    cnt INT NOT NULL,
    rdate DATETIME
);
ALTER TABLE cart ADD CONSTRAINT PRIMARY KEY (cartid);
ALTER TABLE cart ADD CONSTRAINT FOREIGN KEY (itemid)REFERENCES item (itemid);
ALTER TABLE cart ADD CONSTRAINT FOREIGN KEY (custid)REFERENCES customer (custid);
ALTER TABLE cart ADD CONSTRAINT CHECK (cnt >= 0);
INSERT INTO cart VALUES(1234,101,'abc',10,'2022-09-01 21:09:21');
INSERT INTO cart VALUES(1235,103,'def',10,'2022-09-02 12:00:00');
INSERT INTO cart VALUES(1236,151,'jkl',31,'2022-09-03 19:24:01');
INSERT INTO cart VALUES(1237,161,'mno',300,'2022-09-05 17:22:21');

INSERT INTO cart VALUES(1238,184,'efg',35,'2022-09-27 15:35:28');
INSERT INTO cart VALUES(1239,194,'ghi',3000,'2022-08-01 22:09:21');
INSERT INTO cart VALUES(1240,153,'pqr',10,'2022-08-24 13:00:00');
INSERT INTO cart VALUES(1241,152,'vwx',31,'2022-08-25 19:24:04');

INSERT INTO cart VALUES(1242,151,'hij',300,'2022-09-05 16:22:21');
INSERT INTO cart VALUES(1243,121,'stu',35,'2022-09-08 20:35:28');
INSERT INTO cart VALUES(1244,134,'yza',300,'2022-09-05 17:22:21');
INSERT INTO cart VALUES(1245,111,'bcd',35,'2022-09-08 14:35:28');

CREATE TABLE request(
	rqid INT,
	custid VARCHAR(20) NOT NULL,
	pay VARCHAR(20) NOT NULL,
    orderprice INT,
    orderdate DATETIME
);
ALTER TABLE request ADD CONSTRAINT PRIMARY KEY (rqid);
ALTER TABLE request MODIFY rqid INT AUTO_INCREMENT;
ALTER TABLE request AUTO_INCREMENT=1;
ALTER TABLE request ADD CONSTRAINT FOREIGN KEY (custid)REFERENCES customer (custid);

INSERT INTO request VALUES(NULL,'abc','신용카드',NULL,NULL);
INSERT INTO request VALUES(NULL,'def','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'ghi','계좌이체',NULL,NULL);
INSERT INTO request VALUES(NULL,'jkl','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'mno','신용카드',NULL,NULL);
INSERT INTO request VALUES(NULL,'pqr','계좌이체',NULL,NULL);
INSERT INTO request VALUES(NULL,'stu','계좌이체',NULL,NULL);
INSERT INTO request VALUES(NULL,'vwx','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'yza','신용카드',NULL,NULL);
INSERT INTO request VALUES(NULL,'bcd','신용카드',NULL,NULL);
INSERT INTO request VALUES(NULL,'efg','무통장입금',NULL,NULL);
INSERT INTO request VALUES(NULL,'hij','계좌이체',NULL,NULL);

DROP TABLE IF EXISTS requestDetail;
CREATE TABLE requestDetail(
	rdno VARCHAR(20),
    rqid INT,
    itemid INT,
    total INT,
    coupon FLOAT,
    rdcnt INT
);
ALTER TABLE requestDetail ADD CONSTRAINT PRIMARY KEY (rdno);
ALTER TABLE requestDetail ADD CONSTRAINT CHECK (coupon >= 0);
ALTER TABLE requestDetail ADD CONSTRAINT FOREIGN KEY (rqid)REFERENCES request (rqid);
ALTER TABLE requestDetail ADD CONSTRAINT FOREIGN KEY (itemid)REFERENCES item (itemid);

INSERT INTO requestdetail VALUES ('a',1,101,NULL,0,5);
INSERT INTO requestdetail VALUES ('b',2,150,NULL,0,10);
INSERT INTO requestdetail VALUES ('c',3,140,NULL,0,9);
INSERT INTO requestdetail VALUES ('d',4,120,NULL,0,4);
INSERT INTO requestdetail VALUES ('e',5,115,NULL,0,2);

CREATE TABLE trans(
	transid INT,
    orderid INT,
    tran VARCHAR(10) NOT NULL,
    ttime DATETIME
);
ALTER TABLE trans ADD CONSTRAINT PRIMARY KEY (transid);
ALTER TABLE trans MODIFY transid INT AUTO_INCREMENT;
ALTER TABLE trans AUTO_INCREMENT = 1;
ALTER TABLE trans ADD CONSTRAINT FOREIGN KEY (orderid)REFERENCES request (rqid);

INSERT INTO trans VALUES (NULL, 1, '가능', NOW());
INSERT INTO trans VALUES (NULL, 2, '불가능', NULL);
INSERT INTO trans VALUES (NULL, 3, '가능', NOW());
INSERT INTO trans VALUES (NULL, 4, '가능', NOW());
INSERT INTO trans VALUES (NULL, 5, '가능', NOW());
INSERT INTO trans VALUES (NULL, 6, '가능', NOW());
INSERT INTO trans VALUES (NULL, 7, '불가능', NULL);
INSERT INTO trans VALUES (NULL, 8, '가능', NOW());
INSERT INTO trans VALUES (NULL, 9, '가능', NOW());
INSERT INTO trans VALUES (NULL, 10, '가능', NOW());
INSERT INTO trans VALUES (NULL, 11, '가능', NOW());
INSERT INTO trans VALUES (NULL, 12, '가능', NOW());

CREATE TABLE stor(
	storid INT,
    itemid INT,
    stor INT ,
    loc VARCHAR(10)
);
ALTER TABLE stor ADD CONSTRAINT PRIMARY KEY (storid);
ALTER TABLE stor MODIFY storid INT AUTO_INCREMENT;
ALTER TABLE stor AUTO_INCREMENT = 0;

ALTER TABLE stor ADD CONSTRAINT FOREIGN KEY (itemid)REFERENCES item (itemid);
ALTER TABLE stor ADD CONSTRAINT CHECK (stor >= 0);

INSERT INTO stor VALUES(NULL, 101, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 102, 1500, 'A1');
INSERT INTO stor VALUES(NULL, 103, 1600, 'A1');
INSERT INTO stor VALUES(NULL, 104, 1200, 'A1');
INSERT INTO stor VALUES(NULL, 105, 2000, 'A1');
INSERT INTO stor VALUES(NULL, 106, 1900, 'A1');
INSERT INTO stor VALUES(NULL, 107, 2100, 'A1');
INSERT INTO stor VALUES(NULL, 108, 1300, 'A1');
INSERT INTO stor VALUES(NULL, 109, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 110, 2000, 'A1');
INSERT INTO stor VALUES(NULL, 111, 1700, 'A1');
INSERT INTO stor VALUES(NULL, 112, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 113, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 114, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 115, 1000, 'A1');
-- 상온보관 A1
INSERT INTO stor VALUES(NULL, 116, 300, 'C1');
INSERT INTO stor VALUES(NULL, 117, 200, 'C1');
INSERT INTO stor VALUES(NULL, 118, 270, 'C1');
INSERT INTO stor VALUES(NULL, 119, 250, 'C1');
INSERT INTO stor VALUES(NULL, 120, 200, 'C1');
INSERT INTO stor VALUES(NULL, 121, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 122, 900, 'C1');
INSERT INTO stor VALUES(NULL, 123, 800, 'C1');
INSERT INTO stor VALUES(NULL, 124, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 125, 1100, 'C1');
INSERT INTO stor VALUES(NULL, 126, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 127, 700, 'C1');
INSERT INTO stor VALUES(NULL, 128, 800, 'C1');
INSERT INTO stor VALUES(NULL, 129, 600, 'C1');
INSERT INTO stor VALUES(NULL, 130, 500, 'C1');
INSERT INTO stor VALUES(NULL, 131, 900, 'C1');
INSERT INTO stor VALUES(NULL, 132, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 133, 500, 'C1');
INSERT INTO stor VALUES(NULL, 134, 500, 'C1');
INSERT INTO stor VALUES(NULL, 135, 700, 'C1');
INSERT INTO stor VALUES(NULL, 136, 1000, 'C1');
INSERT INTO stor VALUES(NULL, 137, 700, 'C1');
INSERT INTO stor VALUES(NULL, 138, 500, 'C1');
INSERT INTO stor VALUES(NULL, 139, 500, 'C1');
INSERT INTO stor VALUES(NULL, 140, 1000, 'C1');
-- 40번까지 + 15~40까지 냉장보관
INSERT INTO stor VALUES(NULL, 141, 700, 'C2');
INSERT INTO stor VALUES(NULL, 142, 800, 'C2');
INSERT INTO stor VALUES(NULL, 143, 700, 'C2');
INSERT INTO stor VALUES(NULL, 144, 900, 'C2');
INSERT INTO stor VALUES(NULL, 145, 900, 'C2');
INSERT INTO stor VALUES(NULL, 146, 800, 'C2');
INSERT INTO stor VALUES(NULL, 147, 900, 'C2');
INSERT INTO stor VALUES(NULL, 148, 700, 'C2');
INSERT INTO stor VALUES(NULL, 149, 800, 'C2');
INSERT INTO stor VALUES(NULL, 150, 700, 'C2');
-- 50번까지 40~50 냉동보관
INSERT INTO stor VALUES(NULL, 151, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 152, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 153, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 154, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 155, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 156, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 157, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 158, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 159, 1000, 'A1');
INSERT INTO stor VALUES(NULL, 160, 1000, 'A1');
-- 50~60 상온보관
INSERT INTO stor VALUES(NULL, 161, 1500, 'L1');
INSERT INTO stor VALUES(NULL, 162, 1300, 'L1');
INSERT INTO stor VALUES(NULL, 163, 1200, 'L1');
INSERT INTO stor VALUES(NULL, 164, 1300, 'L1');
INSERT INTO stor VALUES(NULL, 165, 1100, 'L1');
-- 65번까지
INSERT INTO stor VALUES(NULL, 166, 1300, 'L1');
INSERT INTO stor VALUES(NULL, 167, 1400, 'L1');
INSERT INTO stor VALUES(NULL, 168, 1200, 'L1');
INSERT INTO stor VALUES(NULL, 169, 1500, 'L1');
INSERT INTO stor VALUES(NULL, 170, 1000, 'L1');
-- 65~70 소형물품보관장소
INSERT INTO stor VALUES(NULL, 171, 1000, 'W1');
INSERT INTO stor VALUES(NULL, 172, 800, 'W1');
INSERT INTO stor VALUES(NULL, 173, 800, 'W1');
INSERT INTO stor VALUES(NULL, 174, 900, 'W1');
INSERT INTO stor VALUES(NULL, 175, 800, 'W1');
-- 70~75 의류
INSERT INTO stor VALUES(NULL, 176, 200, 'L1');
INSERT INTO stor VALUES(NULL, 177, 200, 'L1');
INSERT INTO stor VALUES(NULL, 178, 300, 'L1');
INSERT INTO stor VALUES(NULL, 179, 150, 'L1');
INSERT INTO stor VALUES(NULL, 180, 170, 'L1');
INSERT INTO stor VALUES(NULL, 181, 130, 'L1');
INSERT INTO stor VALUES(NULL, 182, 110, 'L1');
INSERT INTO stor VALUES(NULL, 183, 150, 'L1');
INSERT INTO stor VALUES(NULL, 184, 160, 'L1');
INSERT INTO stor VALUES(NULL, 185, 140, 'L1');
-- 85번까지 소형가전보관소
INSERT INTO stor VALUES(NULL, 186, 20, 'L2');
INSERT INTO stor VALUES(NULL, 187, 20, 'L2');
INSERT INTO stor VALUES(NULL, 188, 30, 'L2');
INSERT INTO stor VALUES(NULL, 189, 15, 'L2');
INSERT INTO stor VALUES(NULL, 190, 17, 'L2');
INSERT INTO stor VALUES(NULL, 191, 13, 'L2');
INSERT INTO stor VALUES(NULL, 192, 11, 'L2');
INSERT INTO stor VALUES(NULL, 193, 15, 'L2');
INSERT INTO stor VALUES(NULL, 194, 16, 'L2');
INSERT INTO stor VALUES(NULL, 195, 14, 'L2');
-- 95번까지 대형물품 창고

CREATE TABLE refund(
	rfid INT,
    rdno VARCHAR(20) NOT NULL,
    reason VARCHAR(20) NOT NULL
);
ALTER TABLE refund ADD CONSTRAINT PRIMARY KEY (rfid);
ALTER TABLE refund ADD CONSTRAINT FOREIGN KEY (rdno)REFERENCES requestDetail (rdno);

INSERT INTO refund VALUES ( 1, 'a', '단순변심');
INSERT INTO refund VALUES ( 2, 'b', '상품파손');
INSERT INTO refund VALUES ( 3, 'c', '서비스불만족');
INSERT INTO refund VALUES ( 4, 'd', '주문실수');

SELECT * FROM cart;
SELECT * FROM cate;
SELECT * FROM customer;
SELECT * FROM item;
SELECT * FROM refund;
SELECT * FROM request;
SELECT * FROM requestdetail;
SELECT * FROM seller;
SELECT * FROM stor;
SELECT * FROM trans;
```

### 자체 제작 문제
```SQL
-- 특정조건 고객이 구매한 상품내역 조회
-- 특정조건의 품목을 구매한 고객 조회
-- 특정 업체에서 판매하는 상품을 구매한 고객 조회
-- 특정 상품을 구매한 고객의 총 구매 금액
-- 특정 상품의 보관장소 등등

-- 1. 남자고객 중 과일/채소를 장바구니에 넣은사람(고객이름, 고객성별, 카테고리번호, 상품이름)
SELECT cu.cname, cu.gender, it.cateid, it.name FROM customer cu
INNER JOIN cart ca ON cu.custid = ca.custid
INNER JOIN item it ON ca.itemid = it.itemid
WHERE cu.gender Like '남'
AND it.cateid IN(10, 11, 12);

-- 2. 서울 거주중인 사람중 구매액이 가장 큰사람
SELECT cname,(rdcnt*price) AS bill FROM customer cu
INNER JOIN request req ON cu.custid = req.custid
INNER JOIN requestdetail red ON req.rqid = red.rqid
INNER JOIN item it ON red.itemid = it.itemid
ORDER BY bill DESC
LIMIT 0,1; 
-- 이거는 원하는 의도가 아직 잘 안됌
-- ERD에서 따로 생각
-- 우리가 했던 예제를 참고해보자 sqldb usertbl, buytbl

-- 3. 판매자'노주희'가 파는 물건 중 가장 비싼 물건
SELECT * FROM seller se
INNER JOIN item it ON se.sellid = it.sellid
WHERE seller = '노주희'
ORDER BY price DESC
LIMIT 0,1;

-- 4. 정희천이 장바구니 총금액
SELECT cu.cname, (ca.cnt*it.price) AS total FROM customer cu
INNER JOIN cart ca ON cu.custid=ca.custid
INNER JOIN item it ON ca.itemid=it.itemid
WHERE cu.cname = '정희천';

-- 5. 신용카드로 결재한 사람 중 성이 강씨 인 사람
SELECT * FROM customer cu
INNER JOIN request re ON cu.custid=re.custid
WHERE re.pay = '신용카드'
AND cu.cname = '강%';
```
### ERD 개선
![](/image/SQL/2022-09-09-13-56-43.png)
- 다음 스샷과 같이 개선을 해보았다
- 최소한의 필요항목만 넣었고
- 프라이머리키와 유니크를 반드시 들어가게 하였다
## 프로그래머스
### level 1 예제
- 220904 7문제를 품
- `ORDER BY`는 정렬하는 명령어
- `LIMIT 0,1`는 0번째부터 시작해서 1개만 조회
- 7문제가 이거정도만 쓰면 다풀림
- 220907 4문제를 품
### level 1 + 2 예제
- 220908 3문제를 품
- `NULL`에 관한 문제들
- 예전 예제중에 `IFNULL` 쓰는 예제를 좀 참고함

### level 2 예제
- `GROUP BY`
- `~ LIKE '%A%'` = A가 들어가는 것들~
- 최고의 문제는 중성화 여부 파악하기

```sql
SELECT ANIMAL_ID, NAME, CASE 
WHEN SEX_UPON_INTAKE LIKE 'Neutered%' or SEX_UPON_INTAKE LIKE 'Spayed%' THEN 'O'
ELSE 'X'
END AS 중성화
FROM ANIMAL_INS
ORDER BY ANIMAL_ID;
```
- `case~end`부터 `when~then`까지 골고루 다씀
- 이 문제를 이해하는 것이 lv.2의 핵심일듯
- 220913 8문제 품

### level 3, 4 예제
- 입양 시각 구하기(2) 예제는 `SET`이라는 걸로 변수를 설정하여 문제를 진행
- `DATEDIFF`사용
- `OUTER JOIN`의 사용. 좌우로 어떤데이터를 선택할지 고민을 해야한다
- `서브쿼리`에 대한 이해도가 증가했다. 특정데이터값을 불러와서 사용해야할 땐 무조건 서브쿼리
- 중복데이터를 제거해야할땐 `DISTINCT`
- 220918 프로그래머스 다 품
  

## 새로 배운 것
- `SELECT count(*) FROM ~`은 행 개수를 알려줌
- `DISTINCT`는 중복된 값을 하나로 쳐줌 ->까먹은것
- `IFNULL`로 항목중에 `NULL`인 값을 다른 것으로 바꿀 수 잇음 ->까먹은것
- `CREATE VIEW`로 우리가 조건 걸어놓은 셀렉문을 담고 AS 건 이름으로 불러올 수 있다
- 어쩌면 뷰를 통해 서브쿼리문을 단순화 가능할 수 도 있을거 같다

## SQLD
- 정규화 - 중복 데이터를 최소화, 정보를 주제별로 분할하는 프로그램
  - 제 1 정규화 - 테이블의 컬럼이 원자값을 갖도록 테이블을 분해
  - 제 2 정규화 - 1정규화 이후 완전 함수 종속을 만족하도록 테이블을 분해
  - 제 3 정규화 - 2정규화 이후 이행적 종속을 없애도록 테이블 분해
- 반정규화
  - 데이터 중복을 허용하고 조인을 줄이는 방법
  - SELECT 속도를 향상, BUT 모델 유연성 낮아짐
  - 클러스터링, 뷰, 인덱스튜닝, 파티션을 먼저 검토 후 반정규화 진행
  - 방법 - 테이블 병합, 테이블 분할, 테이블 추가
- 속성
  - 정의 - 업무에서 필요로 하는 인스턴스로 관리하고자 하는 의미상 더 이상 분리되지 않는 데이터 단위
- 프로시저
  - 정의 - 일련의 쿼리를 하나의 함수처럼 실행하기 위한 쿼리 집합
- 트리거
  - 정의 - 테이블에서 DML이벤트가 발생했을 때 자동으로 실행되는 것
- 트리거 VS 프로시저
  - 정의 - 트리거 이벤트가 실행된 테이블을 트리거로 수정하려하면 에러
  - 이러한 경우 트리거 테이블을 수정하려면 프로시저 사용
  - 트리거는 DML이벤트마다 동일하게 처리하여 적용하는 경우 사용
  - 그렇지 않은 경우는 프로시저 사용